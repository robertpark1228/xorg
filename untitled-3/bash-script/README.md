---
description: Linux 운용 언어
---

# Bash Script

### **쉘스크립트 기초**

스크립트 최상단에 적어야 하는 문구 입니다. Shabang 이라고 합니다.

```
#!/bin/bash

echo "hello, world"
printf "hello, world"
```



C에서 그대로 따온 printf 란 기능이 있습니다.

```
printf "%s, %s" hello, world
```



1\) 변수

변수명 = 변수값 이며 다시 사용할때 (꺼내올때)는 앞에 $를 붙여 줍니다.

```
#!/bin/bash

h="hello"
w="world"
echo "${h}, ${w}"
```

```
#!/bin/bash
#exam2.sh
echo ${MY_VAR}
```

2\) 매개변수

```
#!/bin/bash


echo "script name:${0}"
echo "매개변수 갯수 :${#}"
echo "전체 매개변수  값 : ${*}"
echo "전체 매개변수 값2 : ${@}"
echo "매개변수 1 : ${1}"
echo "매개변수 2 : ${2}"
```

3\) 예약변수



| 수            | 설명                                                                                                                                        |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------- |
| **HOME**     | 사용자 홈 디렉토리를 의미합니다.                                                                                                                        |
| **PATH**     | 실행 파일의 경로입니다. 여러분이 chmod, mkdir 등의 명령어들은 /bin이나 /usr/bin, /sbin에 위치하는데, 이 경로들을 PATH 지정하면 여러분들은 굳이 /bin/chmod를 입력하지 않고, chmod 입력만 해주면 됩니다. |
| **LANG**     | 프로그램 실행 시 지원되는 언어를 말합니다.                                                                                                                  |
| **UID**      | 사용자의 UID입니다.                                                                                                                              |
| **SHELL**    | 사용자가 로그인시 실행되는 쉘을 말합니다.                                                                                                                   |
| **USER**     | 사용자의 계정 이름을 말합니다.                                                                                                                         |
| **FUNCNAME** | 현재 실행되고 있는 함수 이름을 말합니다.                                                                                                                   |
| **TERM**     | 로그인 터미널을 말합니다.                                                                                                                            |

## 2) 배열

파이쏜으로 따지면 list 의 개념 입니다. 파이쏜과 다른점은 파이쏜의 리스트는 차원 지원이 가능 합니다. \
바꿔 말하면 list 안에 list 만드는것이 가능 합니다.\
\
배쉬의 배열은 1차원 배열만 지원하며 중괄호를 사용해야합니다. 배열 원소는 소괄호안에 공백으로 구분하여 줍니다. 배열 안 원소는 문자열이든 정수든 상관 없이 쓸 수 있는 특징이 있습니다.

```
#!/bin/bash

arr=("hello" "world" 1 2 3 4 5)

echo "배열 전체 : ${arr[@]}"
echo "배열 원소의 갯수 : ${#arr[@]}"
echo "배열 첫번째 : ${arr}, 혹은 ${arr[0]}"
echo "5번 index를 갖는 배열의 원소 : ${arr[5]}"

arr[5]="five"

echo "5번 index를 갖는 배열의 원소 : ${arr[5]}"

# 5번 원소 해제
unset arr[5]
echo "5번 원소 삭제 후"
echo "5번 index를 갖는 배열의 원소 : ${arr[5]}"
echo "6번 index를 갖는 배열의 원소 : ${arr[6]}"
```

#### **3) 함수(Function)**

다른 프로그래밍 언어와 같이 쉘 스크립트에서도 함수를 사용할 수 있습니다. 함수의 정의 형식은 아래와 같습니다. 함수명 앞 function은 써주지 않아도 무관합니다. 주의 할 점은 함수가 호출되기 전에 함수가 정의되어 있어야하며 호출할때는 괄호를 써주지 않고 호출해야한다는 점입니다.

```
function 함수명(){
 ... 내용 ...
}
```

```
#!/bin/bash

function func(){
        echo "func()"
}

#함수 호출
func
```

#### **4) 비교문**

쉘스크립트에서 비교문은 약간 특이합니다. 아래와 같은 형식으로 비교문을 사용할 수 있습니다. 

```
if [ 값1 조건 값2 ]; then
	... 작업 내용 ...
fi

```

```
#!/bin/bash

function func(){
        a=10
        b=5

        if [ ${a} -eq ${b} ]; then
                echo "a와 b는 같다."
        fi

        if [ ${a} -ne ${b} ]; then
                echo "a와 b는 같지 않다."
        fi

        if [ ${a} -gt ${b} ]; then
                echo "a가 b보다 크다."
        fi

        if [ ${a} -ge ${b} ]; then
                echo "a가 b보다 크거나 같다."
        fi

        if [ ${a} -lt ${b} ]; then
                echo "a가 b보다 작다."
        fi

        if [ ${a} -le ${b} ]; then
                echo "a가 b보다 작거나 같다."
        fi

}

#함수 호출
func
```

IF 문 조건식

쉘스크립트는 명령어를 다루는 스크립트이기 때문에 파일이 존재하는지, 디렉토리가 존재하는지 등 파일과 관련된 조건 여부도 조건문을 통해 알 수 있습니다. 앞에 느낌표(!)를 써주고 조건을 기재하면 그 조건이 false일때 참이 성립합니다.

**파일 관련 조건**

| **조건**                                                        | **설명**                                                                  |
| ------------------------------------------------------------- | ----------------------------------------------------------------------- |
| <p>if [ -d ${변수} ]; then <br>if [ ! -d ${변수} ]; then</p>      | <p>${변수}의 디렉토리가 존재하면 참이 성립합니다. <br>${변수}의 디렉토리가 존재하지 않으면 참이 성립합니다. </p> |
| <p>if [ -e ${변수} ]; then <br>if [ ! -e ${변수} ]; then <br></p> | <p>${변수}라는 파일이 존재하면 참입니다.<br>${변수}라는 파일이 존재하지 않으면 참입니다.</p>             |
| if \[ -L ${변수} ]; then                                        | 파일이 symbolic link이면 참입니다.                                               |
| if \[ -s ${변수} ]; then                                        | 파일의 크기가 0보다 크면 참입니다.                                                    |
| if \[ -S ${변수} ]; then                                        | 파일 타입이 소켓이면 참입니다.                                                       |
| if \[ -r ${변수} ]; then                                        | 파일을 읽을 수 있으면 참입니다.                                                      |
| if \[ -w ${변수} ]; then                                        | 파일을 쓸 수 있으면 참입니다.                                                       |
| if \[ -x ${변수} ]; then                                        | 파일을 실행할 수 있으면 참입니다.                                                     |
| if \[ -f ${변수} ]; then                                        | 파일이 정규 파일이면 참입니다.                                                       |
| if \[ -c ${변수} ]; then                                        | 파일이 문자 장치이면 참입니다.                                                       |
| if \[ ${변수1} -nt ${변수2}]; then                                | 변수1의 파일이 변수2의 파일보다 최신 파일이면 참입니다.                                        |
| if \[ ${변수1} -ot ${변수2}]; then                                | 변수1의 파일이 변수2의 파일보다 최신이 아니면 참입니다.                                        |
| if \[ ${변수1} -ef ${변수2}]; then                                | 변수1의 파일과 변수2의 파일이 동일하면 참입니다.                                            |

```
function func(){
        a=aa
        b=bb
        if [ -f ${a} -a -d ${b} ]; then
                echo "a는 파일이고 b는 디렉토리 "
        fi
}

#함수 호출
func
```

